/***************************************************************************
                          ForProgrammers.txt  - description
                             -------------------
    begin     : Mon 3 May 2004
    copyright : (c) 2004 by Lazutin Yriy, all rights reserved.
    email     : lazutin@newmail.ru
 ***************************************************************************/

/////////////////////////////////////////////////////////////////////////////
///// Краткое описание работы чата.
/////////////////////////////////////////////////////////////////////////////

Установка соединения и вход пользователя в чат.

1. Соединяемся с сервером

2. Программа клиент посылает серверу пакет со следующим содержимым:
	Тип сообщения - MSG_JOIN_ME
	Размер записи reclen - Количество байт в теле пакета (заголовок не считается)
	Данные (buf) - Никнейм пользователя (до 30 байт, завершение строки двоичным нулем не требуется)
3. Сервер добавляет никнейм в список connections (т.е. тем самым регистрирует пользователя)
4. Сервер уведомляет всех клиентов кроме нового о появлении нового участника, рассылая сообщения вида:
	Тип сообщения - MSG_ADD_NICK
	Размер записи reclen - Количество байт в теле пакета (без заголовка)
	Данные (buf) - Никнейм нового пользователя (до 30 байт, завершение строки двоичным нулем не требуется)
5. Сервер посылает новому участнику пакеты с никами всех подключенных пользователей.
	Пакет выглядит следующим образом:
	Тип сообщения - MSG_UPD_NICKS
	Размер записи reclen - Количество байт в теле пакета (без заголовка)
	Данные (buf) - Ники пользователей (каждый до 30 байт), отделенные друг от друга двоичным нулем.

	Ник1\0Ник2\0Ник3\0

Примечание:
	Собирать список ников пользователей для нового клиента (пункт 5) и отправлять
	другим пользователям никнейм нового клиента (пункт 4) можно одновременно
	т.е. за один проход по списку соединений, что позволит улучшить
	производительность. (В данный момент пункты 4 и 5 выполняются последовательно за два прохода).

Завершение соединения (т.е. получение от клиента сообщения MSG_EXIT)

1. Рассылаем ВСЕМ клиентам пакет следующего содержания:
	Тип сообщения - MSG_RM_NICK
	Размер записи reclen - Количество байт в теле пакета (без заголовка)
	Данные (buf) - Никнейм удаляемого пользователя (до 30 байт, завершение
	строки двоичным нулем не требуется)
2. Удаляем клиента из списка соединений (удаляем соединение из списка,
	закрываем сокет, освобождаем выделенную память)
